<!DOCTYPE html> 
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BioStructure Explorer - Gene/Protein Interaction Graph</title>

<link rel="stylesheet" href="css/module-common.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Poppins:wght@600;700&display=swap" rel="stylesheet">
<script src="https://d3js.org/d3.v7.min.js"></script>

<style>
:root {
  --bg-main: #2C3930;
  --bg-panel: #3F4F44;
  --bg-light: #F5F7FA;
  --accent: #A27B5C;
  --accent2: #2ECC71;
  --text-main: #DCD7C9;
  --text-muted: #B0A394;
  --radius: 12px;
  --space-sm: 8px;
  --space-md: 16px;
  --space-lg: 32px;
}

body {
    font-family: 'Inter', sans-serif;
    margin: 0;
    padding: 0;
    background-color: var(--bg-main);
    color: var(--text-main);
    overflow-x: hidden;
}

html {
    background-color: var(--bg-main);
    scrollbar-width: thin;
    scrollbar-color: var(--accent) var(--bg-main);
}

html::-webkit-scrollbar {
    width: 10px;
}

html::-webkit-scrollbar-track {
    background: var(--bg-main);
}

html::-webkit-scrollbar-thumb {
    background: var(--accent);
    border-radius: 5px;
}

html::-webkit-scrollbar-thumb:hover {
    background: #8B6B4F;
}

/* Header */
.header {
    background-color: var(--bg-main);
    color: var(--text-main);
    padding: 0.75rem 1.5rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 2px solid var(--accent);
    position: sticky;
    top: 0;
    z-index: 100;
}
.header h1 {
    margin: 0;
    font-size: 1.8rem;
    font-family: 'Poppins', sans-serif;
    letter-spacing: 1px;
}
.header a {
    color: var(--text-main);
    text-decoration: none;
    font-size: 1.1rem;
    display: flex;
    align-items: center;
}
.header a i {
    margin-right: 0.4rem;
}

/* Module Container */
.module-container {
    max-width: 1600px;
    margin: 0 auto;
    padding: 0.75rem;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.module-description {
    font-size: 0.9rem;
    color: var(--text-muted);
    margin-bottom: 0.5rem;
    line-height: 1.5;
    max-width: 900px;
}

/* Controls Panel */
.controls-panel {
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem;
    background-color: var(--bg-panel);
    padding: 0.75rem;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    align-items: center;
}

.controls-panel .control-group {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.controls-panel .control-group label {
    color: var(--text-main);
    font-weight: 500;
}

.controls-panel input,
.controls-panel select {
    border-radius: 8px;
    border: 1px solid rgba(162, 123, 92, 0.3);
    padding: 0.75rem;
    font-size: 0.95rem;
    background-color: var(--bg-main);
    color: var(--text-main);
    transition: all 0.2s ease;
}

.controls-panel input:focus,
.controls-panel select:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 3px rgba(162, 123, 92, 0.2);
}

.controls-panel button {
    border-radius: 6px;
    border: none;
    padding: 0.6rem 1.2rem;
    font-size: 0.9rem;
    cursor: pointer;
    color: #fff;
    transition: all 0.2s ease;
    font-weight: 500;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
}
.controls-panel button#graph-animate-bfs { 
    background: var(--accent);
}
.controls-panel button#graph-animate-bfs:hover {
    background: #8B6B4F;
}
.controls-panel button#graph-animate-dfs { 
    background: var(--accent2);
}
.controls-panel button#graph-animate-dfs:hover {
    background: #27ae60;
}
.controls-panel button#graph-reset { 
    background: #6c757d;
}
.controls-panel button#graph-reset:hover {
    background: #5a6268;
}
.controls-panel button:hover { 
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}
.controls-panel button:active {
    transform: translateY(0);
}

/* Results Container */
.results-container {
    display: grid;
    grid-template-columns: 280px 1fr;
    gap: 0.75rem;
}

/* Traversal Panel */
.traversal-panel {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.traversal-box {
    background: linear-gradient(135deg, var(--bg-panel) 0%, #2E3A34 100%);
    padding: 0.75rem;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(162, 123, 92, 0.15);
    transition: all 0.2s ease;
}

.traversal-box:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
}

.traversal-box h3 {
    margin-bottom: 0.5rem;
    color: var(--accent);
    font-size: 1rem;
    font-weight: 600;
}

.traversal-box ul {
    list-style: none;
    max-height: 180px;
    overflow-y: auto;
    padding-left: 0;
    scrollbar-width: thin;
    scrollbar-color: var(--accent) var(--bg-panel);
}

.traversal-box ul::-webkit-scrollbar {
    width: 6px;
}

.traversal-box ul::-webkit-scrollbar-track {
    background: var(--bg-panel);
}

.traversal-box ul::-webkit-scrollbar-thumb {
    background: var(--accent);
    border-radius: 3px;
}

.traversal-box ul li {
    padding: 0.35rem 0;
    border-bottom: 1px solid rgba(85, 85, 85, 0.3);
    color: var(--text-main);
    font-size: 0.9rem;
}

/* Visualization Panel */
.visualization-panel {
    flex: 2;
    background-color: var(--bg-panel);
    border-radius: var(--radius);
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    padding: 1rem;
    display: flex;
    flex-direction: column;
    gap: 1rem;
    min-width: 400px;
}

.visualization-panel h2 {
    font-size: 1.1rem;
    color: var(--accent);
    margin: 0;
    font-weight: 600;
}

#graph-viz-container {
    position: relative;
    width: 100%;
    height: calc(100vh - 280px);
    min-height: 600px;
    background: linear-gradient(135deg, #2E3A34 0%, #1F2823 100%);
    border-radius: 8px;
    overflow: hidden;
    box-shadow: inset 0 2px 20px rgba(0,0,0,0.4), 0 2px 8px rgba(0,0,0,0.2);
    border: 1px solid rgba(162, 123, 92, 0.2);
}

#graph-2d-viz {
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    height: 100% !important;
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
}

.viz-panel {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: none;
}
.viz-panel.active {
    display: block;
}

/* Legend */
.visualization-panel .legend {
    font-size: 0.8rem;
    background: rgba(46, 58, 52, 0.5);
    padding: 0.5rem 0.75rem;
    border-radius: 6px;
    color: var(--text-muted);
    margin-top: 0;
    border: 1px solid rgba(162, 123, 92, 0.2);
}

/* Responsive */
@media (max-width: 1200px) {
    .results-container { 
        grid-template-columns: 1fr;
    }
    .traversal-panel {
        order: 2;
    }
    .visualization-panel {
        order: 1;
    }
    #graph-viz-container {
        height: 500px;
        min-height: 500px;
    }
}

</style>
</head>
<body>

<div class="header">
    <h1><i class="fas fa-project-diagram"></i> Gene/Protein Interaction Graph</h1>
    <a href="index.html"><i class="fas fa-home"></i> Home</a>
</div>

<div class="module-container">
    <p class="module-description">
        Graph-based analysis of biological networks using BFS, DFS, and centrality metrics.
    </p>

    <div class="controls-panel">
        <div class="control-group">
            <label for="graph-file">Upload JSON Results (optional):</label>
            <input type="file" id="graph-file" accept=".json">
        </div>
        <div class="control-group">
            <label for="graph-layout">Layout:</label>
            <select id="graph-layout">
                <option value="force">Force-Directed</option>
                <option value="circular">Circular</option>
                <option value="hierarchical">Hierarchical</option>
            </select>
        </div>
        <div class="control-group" style="flex-direction: row; align-items: center; gap: 0.5rem;">
            <button id="graph-animate-bfs"><i class="fas fa-play"></i> Animate BFS</button>
            <button id="graph-animate-dfs"><i class="fas fa-play"></i> Animate DFS</button>
            <button id="graph-reset">Reset</button>
        </div>
    </div>

    <div class="results-container">
        <div class="traversal-panel">
            <div class="traversal-box">
                <h3>BFS Traversal</h3>
                <ul id="bfs-traversal"></ul>
            </div>
            <div class="traversal-box">
                <h3>DFS Traversal</h3>
                <ul id="dfs-traversal"></ul>
            </div>
            <div class="traversal-box">
                <h3>Node Centrality</h3>
                <ul id="node-centrality"></ul>
            </div>
        </div>

        <div class="visualization-panel">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <h2>Network Visualization</h2>
                <div id="graph-tooltip" style="position: absolute; background: rgba(0,0,0,0.8); color: white; padding: 0.5rem; border-radius: 4px; pointer-events: none; display: none; z-index: 1000;"></div>
            </div>
            <div id="graph-viz-container">
                <div id="graph-2d-viz" class="viz-panel active"></div>
                <div id="graph-3d-viz" class="viz-panel"></div>
            </div>
            <div class="legend">
                <strong>Legend:</strong> Node size = Centrality | Edge thickness = Weight | Click node to see path | Click traversal item to highlight | Drag nodes to move them
            </div>
            
            <div class="graph-explanation" style="margin-top: 0.75rem; padding: 1rem; background: linear-gradient(135deg, rgba(63, 79, 68, 0.5) 0%, rgba(46, 58, 52, 0.5) 100%); border-radius: 8px; border: 1px solid rgba(162, 123, 92, 0.2);">
                <h3 style="color: var(--accent); font-size: 1rem; font-weight: 600; margin-bottom: 0.75rem; display: flex; align-items: center; gap: 0.5rem;">
                    <i class="fas fa-info-circle"></i> Understanding Gene/Protein Interaction Networks
                </h3>
                <div style="font-size: 0.85rem; line-height: 1.6; color: var(--text-main);">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 0.75rem;">
                        <div>
                            <p style="margin: 0 0 0.5rem 0;">
                                <strong style="color: var(--accent);">ðŸ”µ BFS (Breadth-First Search):</strong> Explores the graph level by level, visiting all neighbors before moving to the next level. Useful for finding shortest paths and analyzing direct interactions.
                            </p>
                            <p style="margin: 0 0 0.5rem 0;">
                                <strong style="color: var(--accent);">ðŸŸ£ DFS (Depth-First Search):</strong> Explores as far as possible along each branch before backtracking. Ideal for discovering pathways and interaction cascades.
                            </p>
                        </div>
                        <div>
                            <p style="margin: 0 0 0.5rem 0;">
                                <strong style="color: var(--accent);">ðŸ“Š Node Centrality:</strong> Measures the importance of each gene/protein in the network. Higher centrality indicates key regulatory nodes or hub proteins.
                            </p>
                            <p style="margin: 0 0 0.5rem 0;">
                                <strong style="color: var(--accent);">ðŸ”— Edge Weight:</strong> Represents interaction strength or confidence. Thicker edges indicate stronger or more reliable interactions.
                            </p>
                        </div>
                    </div>
                    
                    <div style="padding: 0.75rem; background: rgba(162, 123, 92, 0.1); border-radius: 6px; border-left: 3px solid var(--accent);">
                        <p style="margin: 0 0 0.5rem 0; font-weight: 600; color: var(--accent);">
                            <i class="fas fa-dna" style="margin-right: 0.4rem;"></i>Biological Significance:
                        </p>
                        <ul style="margin: 0; padding-left: 1.5rem; list-style-type: disc;">
                            <li style="margin-bottom: 0.3rem;"><strong>Hub Nodes</strong> (high centrality) often represent essential genes or key regulatory proteins</li>
                            <li style="margin-bottom: 0.3rem;"><strong>Shortest Paths</strong> (BFS) reveal direct regulatory relationships and signaling cascades</li>
                            <li style="margin-bottom: 0.3rem;"><strong>Graph Topology</strong> can indicate functional modules, protein complexes, or metabolic pathways</li>
                            <li><strong>Connected Components</strong> may represent isolated biological processes or subsystems</li>
                        </ul>
                    </div>
                    
                    <p style="margin-top: 0.75rem; padding-top: 0.75rem; border-top: 1px solid rgba(162, 123, 92, 0.2); font-style: italic; color: var(--text-muted); font-size: 0.8rem;">
                        <i class="fas fa-lightbulb" style="margin-right: 0.4rem; color: var(--accent);"></i>
                        <strong>Tip:</strong> Click "Animate BFS" or "Animate DFS" to visualize how each algorithm explores the network. Click on any node to see its connections and position in the traversal order. Drag nodes to rearrange the layout for better clarity.
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="js/module-common.js"></script>
<script type="module" src="js/graph-visualization.js"></script>
</body>
</html>
